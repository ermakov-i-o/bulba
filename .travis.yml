sudo: required
dist: bionic
language: cpp
os: linux
arch:
  - amd64
  - arm64
compiler:
  - gcc
  - clang
addons:
  apt:
    update: true
    sources:
      - sourceline: 'ppa:ubuntu-toolchain-r/test'
      #- sourceline: 'deb https://apt.kitware.com/ubuntu/ bionic main'
      #  key_url: 'https://apt.kitware.com/keys/kitware-archive-latest.asc'
    packages:
      - cmake
jobs:
  include:
    - os: windows
      arch: amd64
      script:
        - cmake --version
        - mkdir build
        - cd build
        - cmake ..
        - cmake --build . --config Release
script:
  - lsb_release --all
  - apt-cache show cmake -a | grep Version
  - cond_call cmake
  - |
    LOCATIONS="$(whereis cmake)"
    for LOCATION in ${LOCATIONS:-}; do
      cond_call $LOCATION
    done
  - cond_call /usr/local/cmake/bin/cmake # secondary location on Xenial
  - hash
  - echo $PATH
  #- cmake --version
  #- mkdir build
  #- cd build
  #- cmake -DCMAKE_BUILD_TYPE=Release ..
  #- cmake --build .
